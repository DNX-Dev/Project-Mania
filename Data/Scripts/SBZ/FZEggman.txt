// ----------------------------------
// RSDK Project: Sonic 1
// Script Description: FZ Eggman Object
// Script Author: Christian Whitehead/Simon Thomley
// Unpacked by Rubberduckycooly's script unpacker
// ----------------------------------

// ========================
// Aliases
// ========================

private alias object.value0 : object.timer
private alias object.value1 : object.invincibilityTimer
private alias object.value2 : object.health // health counts up instead of down this time...
private alias object.value3 : object.boundsR
private alias object.value4 : object.isVulnerable
private alias object.value5 : object.floorPos
private alias object.value6 : object.flashFrame

private alias object.value22 : object.screenFlashTimer

// Piston aliases
private alias object.value0 : fzPiston.fzEggmanSlot
private alias object.propertyValue : fzPiston.hasEggman

// Piston States
private alias 0 : FZPISTON_IDLE
private alias 1 : FZPISTON_SETUP_CRUSHING

// Plasma Emitter Aliases
private alias object.xpos   : plasmaEmitter.xpos
private alias object.ypos   : plasmaEmitter.ypos
private alias object.state  : plasmaEmitter.emitting
private alias object.value0 : plasmaEmitter.timer

// Plasma Ball Aliases
private alias object.value1 : plasmaBall.targetPos.x

// EggMobile aliases
private alias object.xpos   : eggmobile.xpos
private alias object.ypos   : eggmobile.ypos
private alias object.state  : eggmobile.state
private alias object.value6 : eggmobile.playerStopPos

// Eggman States
private alias 0 : FZEGGMAN_AWAITPLAYER
private alias 1 : FZEGGMAN_STARTFIGHT
private alias 2 : FZEGGMAN_SETUP_PISTONATTACK
private alias 3 : FZEGGMAN_PISTONATTACK
private alias 4 : FZEGGMAN_SETUP_PLASMAATTACK
private alias 5 : FZEGGMAN_PLASMAATTACK
private alias 6 : FZEGGMAN_FLEE
private alias 7 : FZEGGMAN_RUNNINGAWAY
private alias 8 : FZEGGMAN_JUMPED

// Eggman Animations
private alias 0 : FZEGGANI_INVISIBLE
private alias 1 : FZEGGANI_IDLE
private alias 2 : FZEGGANI_LAUGH
private alias 3 : FZEGGANI_HIT
private alias 4 : FZEGGANI_DEFEATED
private alias 5 : FZEGGANI_TOASTED

// Player Aliases
private alias object.state : player.state
private alias object.xpos : player.xpos
private alias object.xvel : player.xvel
private alias object.speed : player.speed
private alias object.animation : player.animation
private alias object.collisionRight : player.collisionRight

// Path ID Aliases
private alias 0 : PATH_A


// ========================
// Function Declarations
// ========================

reserve function FZEggman_CheckBossHit

// ========================
// Tables
// ========================

private table FZEggman_destroyFrameTable
	8, 4, 9, 4
end table

// in pairs of 2
// so entities +1 & +2 would go, then +2 & +3, etc etc
private table FZEggman_pistonAttackSlots
	1, 2
	2, 3
	3, 4
	4, 1
end table


// ========================
// Function Definitions
// ========================

private function FZEggman_CheckBossHit
	object.health = 7
	CheckEqual(player[currentPlayer].animation, ANI_JUMPING)
	temp0 = checkResult
	CheckEqual(player[currentPlayer].animation, ANI_GLIDING)
	temp0 |= checkResult
	CheckEqual(player[currentPlayer].animation, ANI_GLIDING_STOP)
	temp0 |= checkResult

	if temp0 == true
		player[currentPlayer].xvel = 0x30000
		if player[currentPlayer].xpos < object.xpos
			FlipSign(player[currentPlayer].xvel)
		end if

		player[currentPlayer].speed = player[currentPlayer].xvel
		if player[currentPlayer].animation == ANI_GLIDING
			player[currentPlayer].animation = ANI_GLIDING_DROP
			player[currentPlayer].state = Player_State_GlideDrop
		end if
		checkResult = true
	else
		checkResult = false
	end if
end function


// ========================
// Events
// ========================

event ObjectUpdate
	switch object.state
	case FZEGGMAN_AWAITPLAYER
		temp1 = screen.xcenter
		temp2 = temp1
		if temp1 == 160
			temp1 += 16
		end if

		temp0 = object.ixpos
		temp0 -= temp1
		stage.newXBoundary1 = temp0
		temp0 += temp1
		temp0 += temp2
		stage.newXBoundary2 = temp0
		temp0 = object.entityPos
		fzPiston[+1].fzEggmanSlot = temp0
		fzPiston[+2].fzEggmanSlot = temp0
		fzPiston[+3].fzEggmanSlot = temp0
		fzPiston[+4].fzEggmanSlot = temp0
		object.boundsR = object.ixpos
		object.boundsR += 712
		object.floorPos = object.ypos
		object.floorPos -= 0x400000
		object.state++
		break

	case FZEGGMAN_STARTFIGHT
		if object[0].xpos >= object.xpos
			object.xpos = 0
			object.ypos = 0
			object.isVulnerable = true
			object.state++
		end if
		break

	case FZEGGMAN_SETUP_PISTONATTACK
		object.animation = FZEGGANI_IDLE
		Rand(temp0, 8)
		temp1 = temp0
		temp1 &= 1
		temp0 &= 6
		GetTableValue(temp2, temp0, FZEggman_pistonAttackSlots)
		temp0++
		GetTableValue(temp3, temp0, FZEggman_pistonAttackSlots)

		arrayPos0 = object.entityPos
		arrayPos0 += temp2
		object[arrayPos0].state = FZPISTON_SETUP_CRUSHING
		if temp1 == 0
			fzPiston[arrayPos0].hasEggman = true
		end if

		arrayPos0 = object.entityPos
		arrayPos0 += temp3
		object[arrayPos0].state = FZPISTON_SETUP_CRUSHING
		if temp1 == 1
			fzPiston[arrayPos0].hasEggman = true
		end if

		PlaySfx(SfxName[Large Wall], false)
		object.timer = 160
		object.state++
		break

	case FZEGGMAN_PISTONATTACK
		object.timer--
		if object.timer <= 0
			if object.health == 8
				temp1 = screen.xcenter
				temp0 = object.boundsR
				temp0 -= temp1
				stage.newXBoundary1 = temp0
				temp0 += temp1
				temp0 += temp1
				stage.newXBoundary2 = temp0
				object.xpos = plasmaEmitter[+5].xpos
				object.xpos += 0x380000
				object.ypos = plasmaEmitter[+5].ypos
				eggmobile[+7].playerStopPos = object.boundsR
				eggmobile[+7].playerStopPos <<= 16
				object.direction = FACING_LEFT
				arrayPos0 = object.entityPos
				arrayPos0 += 5
				ResetObjectEntity(arrayPos0, TypeName[Explosion], 0, object[arrayPos0].xpos, object[arrayPos0].ypos)
				object.isVulnerable = false // you can't underflow the value if it counts up AND you disable attacks :bigthinker:
				object.animation = FZEGGANI_TOASTED
				object.state = FZEGGMAN_FLEE
				
				object[10].screenFlashTimer = 1 // SBZSetup
				PlaySfx(SfxName[Alarm], false)
			else
				object.state++
			end if
		end if
		break

	case FZEGGMAN_SETUP_PLASMAATTACK
		plasmaEmitter[+5].emitting = true
		plasmaEmitter[+5].timer = 330

		temp0 = 0
		temp1 = 0
		while temp0 < 4
			CreateTempObject(TypeName[Plasma Ball], 0, plasmaEmitter[+5].xpos, plasmaEmitter[+5].ypos)
			object[tempObjectPos].inkEffect = INK_ADD
			object[tempObjectPos].alpha = 0x00
			plasmaBall[tempObjectPos].targetPos.x = 4
			temp0++
			plasmaBall[tempObjectPos].targetPos.x = temp1
			plasmaBall[tempObjectPos].targetPos.x += plasmaEmitter[+5].xpos
			plasmaBall[tempObjectPos].targetPos.x -= 0x100000
			Rand(temp2, 32)
			temp2 -= 16
			temp2 <<= 16
			plasmaBall[tempObjectPos].targetPos.x += temp2
			temp1 -= 0x4F0000
		loop

		object.timer = 330
		object.state++
		break

	case FZEGGMAN_PLASMAATTACK
		object.timer--
		if object.timer <= 0
			object.state = FZEGGMAN_SETUP_PISTONATTACK
		end if
		break

	case FZEGGMAN_FLEE
		object.ypos += object.yvel
		object.yvel += 0x1000

		if object.ypos >= object.floorPos
			ObjectTileCollision(CSIDE_FLOOR, 0, 28, PATH_A)
			if checkResult == true
				object.animation = FZEGGANI_INVISIBLE
				object.xvel = 0x10000
				object.yvel = -0x10000
				object.timer = 0
				object.animation = FZEGGANI_TOASTED
				object.state++
			end if
		end if
		break

	case FZEGGMAN_RUNNINGAWAY
		object.xpos += object.xvel
		object.ypos += object.yvel
		ObjectTileCollision(CSIDE_FLOOR, 0, 28, PATH_A)
		if checkResult == false
			object.yvel += 0x1000
		else
			object.yvel = 0
		end if

		temp1 = 0
		foreach (GROUP_PLAYERS, currentPlayer, ACTIVE_ENTITIES)
			if player[currentPlayer].xpos > temp1
				temp1 = player[currentPlayer].xpos
			end if
		next

		temp0 = object.xpos
		temp0 -= temp1
		if temp0 < 0
			object.xvel = 0x50000
		else
			object.xvel = 0x40000
			temp0 -= 0x700000
			if temp0 >= 0
				object.xvel -= 0x10000
				temp0 -= 0x80000
				if temp0 >= 0
					object.xvel -= 0x10000
					temp0 -= 0x80000
					if temp0 >= 0
						object.xvel -= 0x8000
						temp0 -= 0x80000
						if temp0 >= 0
							object.xvel -= 0x8000
							temp0 -= 0x80000
							if temp0 >= 0
								object.xvel -= 0x8000
								temp0 -= 0x380000
								if temp0 >= 0
									object.xvel = 0
								end if
							end if
						end if
					end if
				end if
			end if
		end if

		temp0 = eggmobile[+7].xpos
		temp0 -= 0x300000
		if object.xpos >= temp0
			object.xvel = 0x24000
			object.yvel = -0x4C000
			object.state++
		end if
		break

	case FZEGGMAN_JUMPED
		object.xpos += object.xvel
		object.ypos += object.yvel
		object.yvel += 0x3400

		if object.xpos >= eggmobile[+7].xpos
			object.xpos = eggmobile[+7].xpos
			object.xvel = 0
		end if

		if object.yvel > 0
			if object.ypos >= eggmobile[+7].ypos
				object.ypos = eggmobile[+7].ypos
				object.yvel = 0
				eggmobile[+7].state++
				object.type = TypeName[Blank Object]
			end if
		end if
		break

	end switch

	switch object.animation
	case FZEGGANI_INVISIBLE
		object.frame = 0
		break

	case FZEGGANI_IDLE
		object.flashFrame = 0
		object.animationTimer++
		object.frame++
		if object.frame < 3
			object.frame = 3
		end if
		if object.frame > 53
			object.frame = 44
		end if
		break

	case FZEGGANI_LAUGH
		object.animationTimer++
		object.frame++
		if object.frame < 3
			object.frame = 3
		end if
		if object.frame > 53
			object.frame = 44
		end if
		break

	case FZEGGANI_HIT
		object.flashFrame = object.invincibilityTimer
		object.animationTimer++
		object.frame++
		if object.frame < 64
			object.frame = 64
		end if
		if object.frame > 82
			object.frame = 77
		end if
		object.flashFrame &= 1
		object.flashFrame += 0
		break

	case FZEGGANI_DEFEATED
		if object.frame < 83
			object.frame = 83
		end if
		if object.frame > 110
			object.frame = 83
		end if
		break

	case FZEGGANI_TOASTED
		object.timer++
		object.direction = FACING_RIGHT
		if object.timer <= 28
			object.frame = 111
		end if
		if object.timer > 28
			object.frame++
			if object.frame < 111
				object.frame = 111
			end if
		end if
		if object.frame > 156
			object.frame = 127
		end if
		break
		
	end switch

	if object.invincibilityTimer != 0
		object.invincibilityTimer--
	end if

	if object.isVulnerable == true
		if object[0].xpos < object.xpos
			object.direction = FACING_LEFT
		else
			object.direction = FACING_RIGHT
		end if

		foreach (GROUP_PLAYERS, currentPlayer, ACTIVE_ENTITIES)
			BoxCollisionTest(C_TOUCH, object.entityPos, -33, -37, 33, 6, currentPlayer, C_BOX, C_BOX, C_BOX, C_BOX)
			if checkResult == true
				CallFunction(FZEggman_CheckBossHit)
				if checkResult == true
					if object.invincibilityTimer == 0
						if object.health < 8
							object.animation = FZEGGANI_HIT
							object.invincibilityTimer = 100
							PlaySfx(SfxName[Boss Hit], false)
#platform: USE_STANDALONE
							object.health++
#endplatform
#platform: USE_ORIGINS
							if game.bossOneLife == false
								object.health++
							else
								object.health = 8
							end if
							
							if object.health == 8
								// Nothing. There's literally nothing here LMAO
							end if
#endplatform
						end if
					end if
				end if
			end if
		next
	end if

	// Handle Stage right boundary
	// -> This doesn't do anything most of the time, since there's already the wall on the right of the arena
	foreach (GROUP_PLAYERS, currentPlayer, ACTIVE_ENTITIES)
		temp0 = player[currentPlayer].collisionRight
		temp0 <<= 16
		temp0 += player[currentPlayer].xpos
		temp1 = stage.curXBoundary2
		temp1 <<= 16
		if temp0 > temp1
			player[currentPlayer].xvel = 0
			player[currentPlayer].speed = 0
			player[currentPlayer].xpos = temp1
			temp0 = player[currentPlayer].collisionRight
			temp0 <<= 16
			player[currentPlayer].xpos -= temp0
		end if
	next
end event


event ObjectDraw
	if object.state >= FZEGGMAN_PISTONATTACK
		DrawSpriteFX(object.flashFrame, FX_FLIP, object.xpos, object.ypos)
		DrawSpriteFX(object.frame, FX_FLIP, object.xpos, object.ypos)
	end if
end event


event ObjectStartup
	switch stage.playerListPos
	case PLAYER_SONIC_ALONE
		LoadSpriteSheet("SBZ/FZEggman.gif")
		break

	case PLAYER_TAILS_ALONE
		LoadSpriteSheet("SBZ/FZEggman.gif")
		break

	case PLAYER_KNUX_ALONE
		LoadSpriteSheet("SBZ/FZEggRobo.gif")
		break
	end switch
	// Flash Hit
	SpriteFrame(0, 0, 0, 0, 470, 163) // Frame 0
	SpriteFrame(-22, -32, 42, 64, 470, 163) // Frame 1

	// Standing
	SpriteFrame(-17, -24, 38, 51, 1, 1) // Frame 2

	// Laughing
	SpriteFrame(-17, -23, 38, 51, 1, 1) // Frame 3
	SpriteFrame(-17, -23, 38, 51, 1, 1) // Frame 4
	SpriteFrame(-17, -23, 38, 51, 40, 1) // Frame 5
	SpriteFrame(-17, -23, 38, 51, 40, 1) // Frame 6
	SpriteFrame(-17, -23, 38, 51, 40, 1) // Frame 7
	SpriteFrame(-17, -23, 38, 51, 40, 1) // Frame 8
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 9
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 10
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 11
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 12
	SpriteFrame(-17, -24, 38, 52, 118, 0) // Frame 13
	SpriteFrame(-17, -24, 38, 52, 118, 0) // Frame 14
	SpriteFrame(-17, -24, 38, 52, 118, 0) // Frame 15
	SpriteFrame(-17, -24, 38, 52, 118, 0) // Frame 16
	SpriteFrame(-17, -24, 38, 52, 157, 0) // Frame 17
	SpriteFrame(-17, -24, 38, 52, 157, 0) // Frame 18
	SpriteFrame(-17, -24, 38, 52, 157, 0) // Frame 19
	SpriteFrame(-17, -24, 38, 52, 157, 0) // Frame 20
	SpriteFrame(-17, -24, 38, 52, 118, 0) // Frame 21
	SpriteFrame(-17, -24, 38, 52, 118, 0) // Frame 22
	SpriteFrame(-17, -24, 38, 52, 118, 0) // Frame 23
	SpriteFrame(-17, -24, 38, 52, 118, 0) // Frame 24
	SpriteFrame(-17, -24, 38, 52, 157, 0) // Frame 25
	SpriteFrame(-17, -24, 38, 52, 157, 0) // Frame 26
	SpriteFrame(-17, -24, 38, 52, 157, 0) // Frame 27
	SpriteFrame(-17, -24, 38, 52, 157, 0) // Frame 28
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 29
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 30
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 31
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 32
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 33
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 34
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 35
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 36
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 37
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 38
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 39
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 40
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 41
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 42
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 43
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 44
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 45
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 46
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 47
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 48
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 49
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 50
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 51
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 52
	SpriteFrame(-17, -23, 38, 51, 196, 1) // Frame 53
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 54
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 55
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 56
	SpriteFrame(-17, -24, 38, 52, 79, 0) // Frame 57
	SpriteFrame(-17, -23, 38, 51, 40, 1) // Frame 58
	SpriteFrame(-17, -23, 38, 51, 40, 1) // Frame 59
	SpriteFrame(-17, -23, 38, 51, 40, 1) // Frame 60
	SpriteFrame(-17, -23, 38, 51, 40, 1) // Frame 61
	SpriteFrame(-17, -23, 38, 51, 1, 1) // Frame 62
	SpriteFrame(-17, -23, 38, 51, 1, 1) // Frame 63

	// Hurt
	SpriteFrame(-21, -25, 42, 53, 274, 1) // Frame 64
	SpriteFrame(-21, -25, 42, 53, 274, 1) // Frame 65
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 66
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 67
	SpriteFrame(-17, -25, 38, 53, 356, 1) // Frame 68
	SpriteFrame(-17, -25, 38, 53, 356, 1) // Frame 69
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 70
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 71
	SpriteFrame(-17, -24, 38, 52, 395, 1) // Frame 72
	SpriteFrame(-17, -24, 38, 52, 395, 1) // Frame 73
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 74
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 75
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 76
	SpriteFrame(-17, -24, 38, 52, 434, 1) // Frame 77
	SpriteFrame(-17, -24, 38, 52, 434, 1) // Frame 78
	SpriteFrame(-17, -24, 38, 52, 434, 1) // Frame 79
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 80
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 81
	SpriteFrame(-17, -24, 38, 52, 317, 1) // Frame 82

	// Toasted
	SpriteFrame(-17, -24, 38, 52, 1, 53) // Frame 83
	SpriteFrame(-17, -24, 38, 52, 1, 53) // Frame 84
	SpriteFrame(-17, -24, 38, 52, 1, 53) // Frame 85
	SpriteFrame(-17, -24, 38, 52, 1, 53) // Frame 86
	SpriteFrame(-17, -24, 38, 52, 40, 53) // Frame 87
	SpriteFrame(-17, -24, 38, 52, 40, 53) // Frame 88
	SpriteFrame(-17, -24, 38, 52, 40, 53) // Frame 89
	SpriteFrame(-17, -24, 38, 52, 40, 53) // Frame 90
	SpriteFrame(-17, -24, 38, 52, 79, 53) // Frame 91
	SpriteFrame(-17, -24, 38, 52, 79, 53) // Frame 92
	SpriteFrame(-17, -24, 38, 52, 79, 53) // Frame 93
	SpriteFrame(-17, -24, 38, 52, 79, 53) // Frame 94
	SpriteFrame(-17, -24, 38, 52, 118, 53) // Frame 95
	SpriteFrame(-17, -24, 38, 52, 118, 53) // Frame 96
	SpriteFrame(-17, -24, 38, 52, 118, 53) // Frame 97
	SpriteFrame(-17, -24, 38, 52, 118, 53) // Frame 98
	SpriteFrame(-17, -24, 38, 52, 157, 53) // Frame 99
	SpriteFrame(-17, -24, 38, 52, 157, 53) // Frame 100
	SpriteFrame(-17, -24, 38, 52, 157, 53) // Frame 101
	SpriteFrame(-17, -24, 38, 52, 157, 53) // Frame 102
	SpriteFrame(-17, -24, 38, 52, 196, 53) // Frame 103
	SpriteFrame(-17, -24, 38, 52, 196, 53) // Frame 104
	SpriteFrame(-17, -24, 38, 52, 196, 53) // Frame 105
	SpriteFrame(-17, -24, 38, 52, 196, 53) // Frame 106
	SpriteFrame(-17, -24, 38, 52, 235, 53) // Frame 107
	SpriteFrame(-17, -24, 38, 52, 235, 53) // Frame 108
	SpriteFrame(-17, -24, 38, 52, 235, 53) // Frame 109
	SpriteFrame(-17, -24, 38, 52, 235, 53) // Frame 110

	// Landing/Flee
	SpriteFrame(-19, -25, 39, 53, 274, 55) // Frame 111
	SpriteFrame(-19, -25, 39, 53, 274, 55) // Frame 112
	SpriteFrame(-19, -25, 39, 53, 314, 55) // Frame 113
	SpriteFrame(-19, -25, 39, 53, 314, 55) // Frame 114
	SpriteFrame(-19, -25, 39, 53, 314, 55) // Frame 115
	SpriteFrame(-19, -25, 39, 53, 314, 55) // Frame 116
	SpriteFrame(-19, -25, 39, 53, 354, 55) // Frame 117
	SpriteFrame(-19, -25, 39, 53, 354, 55) // Frame 118
	SpriteFrame(-19, -25, 39, 53, 354, 55) // Frame 119
	SpriteFrame(-19, -25, 39, 53, 354, 55) // Frame 120
	SpriteFrame(-19, -25, 39, 53, 354, 55) // Frame 121
	SpriteFrame(-19, -25, 39, 53, 394, 55) // Frame 122
	SpriteFrame(-19, -25, 39, 53, 394, 55) // Frame 123
	SpriteFrame(-19, -25, 39, 53, 394, 55) // Frame 124
	SpriteFrame(-19, -25, 39, 53, 394, 55) // Frame 125
	SpriteFrame(-19, -25, 39, 53, 394, 55) // Frame 126

	// Running
	SpriteFrame(-31, -25, 58, 53, 1, 164) // Frame 127
	SpriteFrame(-31, -25, 58, 53, 1, 164) // Frame 128
	SpriteFrame(-31, -25, 58, 53, 1, 164) // Frame 129
	SpriteFrame(-31, -25, 58, 53, 60, 164) // Frame 130
	SpriteFrame(-31, -25, 58, 53, 60, 164) // Frame 131
	SpriteFrame(-31, -25, 58, 53, 60, 164) // Frame 132
	SpriteFrame(-31, -25, 58, 53, 119, 164) // Frame 133
	SpriteFrame(-31, -25, 58, 53, 119, 164) // Frame 134
	SpriteFrame(-31, -25, 58, 53, 119, 164) // Frame 135
	SpriteFrame(-31, -25, 58, 53, 178, 164) // Frame 136
	SpriteFrame(-31, -25, 58, 53, 178, 164) // Frame 137
	SpriteFrame(-31, -25, 58, 53, 178, 164) // Frame 138
	SpriteFrame(-31, -25, 58, 53, 237, 164) // Frame 139
	SpriteFrame(-31, -25, 58, 53, 237, 164) // Frame 140
	SpriteFrame(-31, -25, 58, 53, 237, 164) // Frame 141
	SpriteFrame(-31, -25, 58, 53, 296, 164) // Frame 142
	SpriteFrame(-31, -25, 58, 53, 296, 164) // Frame 143
	SpriteFrame(-31, -25, 58, 53, 296, 164) // Frame 144
	SpriteFrame(-31, -25, 58, 53, 354, 163) // Frame 145
	SpriteFrame(-31, -25, 58, 53, 354, 163) // Frame 146
	SpriteFrame(-31, -25, 58, 53, 354, 163) // Frame 147
	SpriteFrame(-31, -25, 58, 53, 412, 164) // Frame 148
	SpriteFrame(-31, -25, 58, 53, 412, 164) // Frame 149
	SpriteFrame(-31, -25, 58, 53, 412, 164) // Frame 150
	SpriteFrame(-31, -25, 58, 53, 359, 109) // Frame 151
	SpriteFrame(-31, -25, 58, 53, 359, 109) // Frame 152
	SpriteFrame(-31, -25, 58, 53, 359, 109) // Frame 153
	SpriteFrame(-31, -25, 58, 53, 418, 109) // Frame 154
	SpriteFrame(-31, -25, 58, 53, 418, 109) // Frame 155
	SpriteFrame(-31, -25, 58, 53, 418, 109) // Frame 156

	foreach (TypeName[FZ Eggman], arrayPos0, ALL_ENTITIES)
		object[arrayPos0].priority = PRIORITY_ACTIVE
		
		// Normally boss health would be set here, as with other bosses, but this boss's health counts up rather that counting down
	next
end event


// ========================
// Editor Events
// ========================

event RSDKDraw
	DrawSprite(0)
end event


event RSDKLoad
	LoadSpriteSheet("SBZ/Objects.gif")
	SpriteFrame(-22, -23, 38, 51, 1, 209)
	
	SetVariableAlias(ALIAS_VAR_PROPVAL, "unused")
end event
